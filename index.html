<!DOCTYPE html>
<html lang="zh-cmn">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="app">
    <p>{{ message | filterB  }}</p>
    <input v-model="message" value="{{ message }}">
</div>

<div id="app2">
    <div class="panel panel-primary">
        <div class="panel-heading">Boolean Formatter</div>
        <div class="panel-body">
            <div class="form-group">
                <label for="inputPercentage">Select a boolean value</label>
                <br>
                <div class="btn-group" role="group" aria-label="...">
                    <button type="button" class="btn btn-default" :class="{ active: boolean === 0 }"
                            v-on:click="boolean = 0">0
                    </button>
                    <button type="button" class="btn btn-default" :class="{ active: boolean === 1 }"
                            v-on:click="boolean = 1">1
                    </button>
                    <button type="button" class="btn btn-default" :class="{ active: boolean === false }"
                            v-on:click="boolean = false">false
                    </button>
                    <button type="button" class="btn btn-default" :class="{ active: boolean === true }"
                            v-on:click="boolean = true">true
                    </button>
                </div>
            </div>
            <p>Result: <mark>{{ boolean | booleanFormat }}</mark> /
                <mark>{{ boolean | booleanFormat( '是','否') }}</mark> /
                <mark>{{ boolean | booleanFormat 'ON' 'OFF' }}</mark> /
                <mark>{{ boolean | booleanFormat '在线' '离线' }}</mark>
            </p>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">Byte Formatter</div>
        <div class="panel-body">
            <div class="form-group">
                <label for="inputSize">Input a size (unit: byte)</label>
                <input type="text" class="form-control" id="inputSize" placeholder="eg. 1000000" v-model="size">
            </div>
            <p>Result: <mark>{{ size | byteFormat }}</mark></p>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">Percentage Formatter</div>
        <div class="panel-body">
            <div class="form-group">
                <label for="inputPercentage">Input a decimal (between 0 and 1)</label>
                <input type="text" class="form-control" id="inputPercentage" placeholder="eg. 0.153" v-model="decimal">
            </div>
            <p>Result: <mark>{{ decimal | percentageFormat }}</mark> /
                <mark>{{ decimal | percentageFormat '0' }}</mark> /
                <mark>{{ decimal | percentageFormat '3' }}</mark></p>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">Timestamp Formatter</div>
        <div class="panel-body">
            <div class="form-group">
                <label for="inputTimestamp">Input a timestamp (in milliseconds)</label>
                <input type="text" class="form-control" id="inputTimestamp" placeholder="eg. 1456971747000"
                       v-model="timestamp">
            </div>
            <p>Result: <mark>{{ timestamp | timestampFormatter }}</mark> /
                <mark>{{ timestamp | timestampFormat('YYYY年MM月DD日 HH时mm分ss秒') }}</mark> /
                <mark>{{ timestamp | timestampFormat 'dddd, MMMM Do, YYYY' }}</mark> /
                <mark>{{ timestamp | timestampFormat 'h:mm A' }}</mark></p>
        </div>
    </div>
</div>
</body>
</html>
<script src="js/vue.js"></script>
<script src="js/moment.min.js"></script>
<script>

    Vue.filter('booleanFormat', function (boolean, trueText, falseText) {
        var result;

        trueText = trueText || 'Yes';
        falseText = falseText || 'No';

        if (boolean === null || boolean === undefined || boolean === '') {
            result = '-';
        } else {
            result = boolean ? trueText : falseText;
        }

        return result;
    });
    Vue.filter('percentageFormat', function (number, digits) {
        var result;

        if (digits === null || digits === undefined) {
            digits = 2;
        }

        digits = parseInt(digits);

        if (number === null || number === '' || isNaN(number)) {
            result = '-';
        } else {
            result = Math.round(number * Math.pow(10, digits) * 100) / Math.pow(10, digits) + '%';
        }

        return result;
    });
    Vue.filter('byteFormat', function (size) {
        var result;

        switch (true) {
            case (size === null || size === '' || isNaN(size)):
                result = '-';
                break;

            case (size >= 0 && size < 1024):
                result = size + ' B';
                break;

            case (size >= 1024 && size < Math.pow(1024, 2)):
                result = Math.round(size / 1024 * 100) / 100 + ' K';
                break;

            case (size >= Math.pow(1024, 2) && size < Math.pow(1024, 3)):
                result = Math.round(size / Math.pow(1024, 2) * 100) / 100 + ' M';
                break;

            case (size >= Math.pow(1024, 3) && size < Math.pow(1024, 4)):
                result = Math.round(size / Math.pow(1024, 3) * 100) / 100 +' G';
                break;

            default:
                result = Math.round(size / Math.pow(1024, 4) * 100) / 100 + ' T';
        }

        return result;
    });
    Vue.filter('timestampFormat', function (timestamp, format) {
        var result;

        timestamp = parseInt(timestamp);

        if (!timestamp){
            result = '-';
        } else if (format) {
            result = moment(timestamp).format(format);
        } else {
            result = moment(timestamp).format('YYYY-MM-DD HH:mm:ss');
        }

        return result;
    });



    var app= new Vue({
        el: '#app',
        data: {
            message:'abvc dgs sdg sdg x sxg d'
        },
        filters: {
            filterA: function (value) {
                if (!value) return '';
                value = value.toString();
                return value.charAt(0).toUpperCase() + value.slice(1);
            },
            filterB: function (value) {
                if (!value) return '';
                var a=value.toString().split(' ');
                var string="";
                a.forEach(function (val,index) {
                    string+=val.charAt(0).toUpperCase()+val.slice(1)+' ';
                });
                return string;
            }
        }
    });

    var app2 = new Vue({
        el: '#app2',
        data: {
            boolean: 1,
            decimal: 0.153333,
            size: 1000000,
            timestamp: 1456989887000
        }
    });


</script>